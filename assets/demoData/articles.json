[
  {
    "id": "00001",
    "time": "1546272000",
    "title": "网页中添加特殊字体解决方案",
    "body": "<h2>前言</h2>\n<p>input upload 图片上传，经常要判断上传图片的宽高。除了运用一些上传插件可以获取。原生的上传方式也可以获取，下面就说一下如何获取上传图片的宽高。</p>\n<h2>以饿了么上传插件为例</h2>\n<!--more-->\n\n\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;el-upload\n                  drag\n                  :action=\"/upload\"\n                  accept=\"image/png, image/jpeg, image/gif, image/jpg\"\n                  :headers=\"headers\"\n                  :on-success =\"successUploads\"\n                  :before-upload =\"uploadyanzheng\"\n                  name=\"image\"\n                  multiple&gt;</span><span class=\"pln\">\n                  </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;i class=\"el-icon-upload\"&gt;&lt;/i&gt;</span><span class=\"pln\">\n                  </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;div class=\"el-upload__text\"&gt;</span><span class=\"pln\">将文件拖到此处，或</span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;em&gt;</span><span class=\"pln\">点击上传</span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;/em&gt;&lt;/div&gt;</span><span class=\"pln\">\n  </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;/el-upload&gt;</span></code></pre>\n<p>上传前的验证：</p>\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"pln\"> uploadyanzheng</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n      </span><span class=\"kwd\">let</span><span class=\"pln\"> _this </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pln\">\n    </span><span class=\"com\">//普通的判断可以用return false</span><span class=\"pln\">\n      </span><span class=\"com\">// 获取文件尺寸，判断尺寸在不在规定范围之内</span><span class=\"pln\">\n      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Promise</span><span class=\"pun\">(</span><span class=\"kwd\">function</span><span class=\"pun\">(</span><span class=\"pln\">resolve</span><span class=\"pun\">,</span><span class=\"pln\"> reject</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n        </span><span class=\"kwd\">let</span><span class=\"pln\"> reader </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">FileReader</span><span class=\"pun\">()</span><span class=\"pln\">\n        reader</span><span class=\"pun\">.</span><span class=\"pln\">readAsDataURL</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">)</span><span class=\"pln\">\n        reader</span><span class=\"pun\">.</span><span class=\"pln\">onload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">function</span><span class=\"pun\">(</span><span class=\"pln\">theFile</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n          </span><span class=\"kwd\">let</span><span class=\"pln\"> image </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Image</span><span class=\"pun\">()</span><span class=\"pln\">\n          image</span><span class=\"pun\">.</span><span class=\"pln\">src </span><span class=\"pun\">=</span><span class=\"pln\"> theFile</span><span class=\"pun\">.</span><span class=\"pln\">target</span><span class=\"pun\">.</span><span class=\"pln\">result\n          image</span><span class=\"pun\">.</span><span class=\"pln\">onload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">function</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n            </span><span class=\"kwd\">let</span><span class=\"pln\"> csize </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`${this.width}*${this.height}`</span><span class=\"pln\">\n            </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">_this</span><span class=\"pun\">.</span><span class=\"pln\">creativeSize</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"pln\">csize</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"com\">//this.creativeSize是可以上传的尺寸列表数组</span><span class=\"pln\">\n              _this</span><span class=\"pun\">.</span><span class=\"pln\">$message</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">(</span><span class=\"str\">`${file.name}尺寸不对，请重新上传！`</span><span class=\"pun\">)</span><span class=\"pln\">\n              reject</span><span class=\"pun\">(</span><span class=\"str\">'图片尺寸不对'</span><span class=\"pun\">)</span><span class=\"pln\">\n            </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n              file</span><span class=\"pun\">.</span><span class=\"pln\">width </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">width\n              file</span><span class=\"pun\">.</span><span class=\"pln\">height </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">height\n              resolve</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">)</span><span class=\"pln\">\n            </span><span class=\"pun\">}</span><span class=\"pln\">\n          </span><span class=\"pun\">}</span><span class=\"pln\">\n        </span><span class=\"pun\">}</span><span class=\"pln\">\n      </span><span class=\"pun\">})</span><span class=\"pln\">\n    </span><span class=\"pun\">},</span></code></pre>\n<h2>普通input file 上传</h2>\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;input type=\"file\" size=\"20\" autocomplete=\"off\" id=\"upload_img\" name=\"Uploadfile\"&gt;</span><span class=\"pln\">\n\nvar MyTest = document.getElementById(\"upload_img\").files[0];\nvar reader = new FileReader();\nreader.readAsDataURL(MyTest);\nreader.onload = function(theFile) {\n　　var image = new Image();\n   image.src = theFile.target.result;\n   image.onload = function() {\n   　　alert(\"图片的宽度为\"+this.width+\",长度为\"+this.height);\n   };\n};</span></code></pre>\n<h2>FileReader介绍</h2>\n<p>FileReader()是一个构造函数，关于该函数的详细介绍，可以查看：<a href=\"javascript:if(confirm('https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader  \\n\\n���ļ��\u07B7��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \\n\\n�����ڷ������ϴ���?'))window.location='https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader'\" target=\"_blank\">https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader</a></p>\n<h2>用法-访问选择的文件</h2>\n<p>可以通过</p>\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;input type=\"file\" id=\"input\" multiple onchange=\"handleFiles(this.files)\"&gt;</span><span class=\"pln\">\n\n </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;div id=\"haorooms\"&gt;&lt;/div&gt;</span><span class=\"pln\">\n\nfunction handleFiles(files) {\n  for (var i = 0; i &lt; files.length; i++) {\n    var file = files[i];\n    var imageType = /^image\\//;\n\n    if (!imageType.test(file.type)) {\n      continue;\n    }\n\n    var img = document.createElement(\"img\");\n    img.classList.add(\"obj\");\n    img.file = file;\n   $(\"#haorooms\").appendChild(img); // 把上传的图片添加到展示的div中\n\n    var reader = new FileReader();\n    reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);\n    reader.readAsDataURL(file);\n  }\n}</span></code></pre>\n<h2>关于上传</h2>\n<p>关于图片上传，我之前也有类似文章，<a href=\"js_inputfileupload.htm\" target=\"_blank\">accept设置</a>等</p>\n<p><a href=\"css_input_uploadmh.htm\" target=\"_blank\">css input[type=file] 样式美化</a></p>",
    "score": 5,
    "viewers": 666,
    "newTag": false
  },
  {
    "id": "00002",
    "time": "1566369907",
    "title": "FileReader获取上传图片的宽高",
    "body": "<h2>前言</h2>\n<p>input upload 图片上传，经常要判断上传图片的宽高。除了运用一些上传插件可以获取。原生的上传方式也可以获取，下面就说一下如何获取上传图片的宽高。</p>\n<h2>以饿了么上传插件为例</h2>\n<!--more-->\n\n\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;el-upload\n                  drag\n                  :action=\"/upload\"\n                  accept=\"image/png, image/jpeg, image/gif, image/jpg\"\n                  :headers=\"headers\"\n                  :on-success =\"successUploads\"\n                  :before-upload =\"uploadyanzheng\"\n                  name=\"image\"\n                  multiple&gt;</span><span class=\"pln\">\n                  </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;i class=\"el-icon-upload\"&gt;&lt;/i&gt;</span><span class=\"pln\">\n                  </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;div class=\"el-upload__text\"&gt;</span><span class=\"pln\">将文件拖到此处，或</span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;em&gt;</span><span class=\"pln\">点击上传</span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;/em&gt;&lt;/div&gt;</span><span class=\"pln\">\n  </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;/el-upload&gt;</span></code></pre>\n<p>上传前的验证：</p>\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"pln\"> uploadyanzheng</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n      </span><span class=\"kwd\">let</span><span class=\"pln\"> _this </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pln\">\n    </span><span class=\"com\">//普通的判断可以用return false</span><span class=\"pln\">\n      </span><span class=\"com\">// 获取文件尺寸，判断尺寸在不在规定范围之内</span><span class=\"pln\">\n      </span><span class=\"kwd\">return</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Promise</span><span class=\"pun\">(</span><span class=\"kwd\">function</span><span class=\"pun\">(</span><span class=\"pln\">resolve</span><span class=\"pun\">,</span><span class=\"pln\"> reject</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n        </span><span class=\"kwd\">let</span><span class=\"pln\"> reader </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">FileReader</span><span class=\"pun\">()</span><span class=\"pln\">\n        reader</span><span class=\"pun\">.</span><span class=\"pln\">readAsDataURL</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">)</span><span class=\"pln\">\n        reader</span><span class=\"pun\">.</span><span class=\"pln\">onload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">function</span><span class=\"pun\">(</span><span class=\"pln\">theFile</span><span class=\"pun\">)</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n          </span><span class=\"kwd\">let</span><span class=\"pln\"> image </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">new</span><span class=\"pln\"> </span><span class=\"typ\">Image</span><span class=\"pun\">()</span><span class=\"pln\">\n          image</span><span class=\"pun\">.</span><span class=\"pln\">src </span><span class=\"pun\">=</span><span class=\"pln\"> theFile</span><span class=\"pun\">.</span><span class=\"pln\">target</span><span class=\"pun\">.</span><span class=\"pln\">result\n          image</span><span class=\"pun\">.</span><span class=\"pln\">onload </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">function</span><span class=\"pun\">()</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n            </span><span class=\"kwd\">let</span><span class=\"pln\"> csize </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"str\">`${this.width}*${this.height}`</span><span class=\"pln\">\n            </span><span class=\"kwd\">if</span><span class=\"pln\"> </span><span class=\"pun\">(!</span><span class=\"pln\">_this</span><span class=\"pun\">.</span><span class=\"pln\">creativeSize</span><span class=\"pun\">.</span><span class=\"pln\">includes</span><span class=\"pun\">(</span><span class=\"pln\">csize</span><span class=\"pun\">))</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"com\">//this.creativeSize是可以上传的尺寸列表数组</span><span class=\"pln\">\n              _this</span><span class=\"pun\">.</span><span class=\"pln\">$message</span><span class=\"pun\">.</span><span class=\"pln\">error</span><span class=\"pun\">(</span><span class=\"str\">`${file.name}尺寸不对，请重新上传！`</span><span class=\"pun\">)</span><span class=\"pln\">\n              reject</span><span class=\"pun\">(</span><span class=\"str\">'图片尺寸不对'</span><span class=\"pun\">)</span><span class=\"pln\">\n            </span><span class=\"pun\">}</span><span class=\"pln\"> </span><span class=\"kwd\">else</span><span class=\"pln\"> </span><span class=\"pun\">{</span><span class=\"pln\">\n              file</span><span class=\"pun\">.</span><span class=\"pln\">width </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">width\n              file</span><span class=\"pun\">.</span><span class=\"pln\">height </span><span class=\"pun\">=</span><span class=\"pln\"> </span><span class=\"kwd\">this</span><span class=\"pun\">.</span><span class=\"pln\">height\n              resolve</span><span class=\"pun\">(</span><span class=\"pln\">file</span><span class=\"pun\">)</span><span class=\"pln\">\n            </span><span class=\"pun\">}</span><span class=\"pln\">\n          </span><span class=\"pun\">}</span><span class=\"pln\">\n        </span><span class=\"pun\">}</span><span class=\"pln\">\n      </span><span class=\"pun\">})</span><span class=\"pln\">\n    </span><span class=\"pun\">},</span></code></pre>\n<h2>普通input file 上传</h2>\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;input type=\"file\" size=\"20\" autocomplete=\"off\" id=\"upload_img\" name=\"Uploadfile\"&gt;</span><span class=\"pln\">\n\nvar MyTest = document.getElementById(\"upload_img\").files[0];\nvar reader = new FileReader();\nreader.readAsDataURL(MyTest);\nreader.onload = function(theFile) {\n　　var image = new Image();\n   image.src = theFile.target.result;\n   image.onload = function() {\n   　　alert(\"图片的宽度为\"+this.width+\",长度为\"+this.height);\n   };\n};</span></code></pre>\n<h2>FileReader介绍</h2>\n<p>FileReader()是一个构造函数，关于该函数的详细介绍，可以查看：<a href=\"javascript:if(confirm('https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader  \\n\\n���ļ��\u07B7��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \\n\\n�����ڷ������ϴ���?'))window.location='https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader'\" target=\"_blank\">https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader</a></p>\n<h2>用法-访问选择的文件</h2>\n<p>可以通过</p>\n<pre class=\"prettyprint prettyprinted\" style=\"\"><code><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;input type=\"file\" id=\"input\" multiple onchange=\"handleFiles(this.files)\"&gt;</span><span class=\"pln\">\n\n </span><span class=\"https://www.haorooms.com/theme/assets/js/lang-in.tag\">&lt;div id=\"haorooms\"&gt;&lt;/div&gt;</span><span class=\"pln\">\n\nfunction handleFiles(files) {\n  for (var i = 0; i &lt; files.length; i++) {\n    var file = files[i];\n    var imageType = /^image\\//;\n\n    if (!imageType.test(file.type)) {\n      continue;\n    }\n\n    var img = document.createElement(\"img\");\n    img.classList.add(\"obj\");\n    img.file = file;\n   $(\"#haorooms\").appendChild(img); // 把上传的图片添加到展示的div中\n\n    var reader = new FileReader();\n    reader.onload = (function(aImg) { return function(e) { aImg.src = e.target.result; }; })(img);\n    reader.readAsDataURL(file);\n  }\n}</span></code></pre>\n<h2>关于上传</h2>\n<p>关于图片上传，我之前也有类似文章，<a href=\"js_inputfileupload.htm\" target=\"_blank\">accept设置</a>等</p>\n<p><a href=\"css_input_uploadmh.htm\" target=\"_blank\">css input[type=file] 样式美化</a></p>",
    "score": 3,
    "viewers": 999,
    "newTag": true
  }
]
